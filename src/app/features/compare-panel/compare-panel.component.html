<div class="panel">
    <div class="panel-header">
        <h2>
            <span class="icon">üî¨</span>
            Compare
            @if (formulas().length > 0) {
            <span class="count">({{ formulas().length }})</span>
            }
        </h2>
        <div class="header-actions">
            @if (formulas().length > 0) {
            <button class="btn-icon btn-danger" (click)="clearAll()" title="Limpar todas">
                üóëÔ∏è
            </button>
            }
        </div>
    </div>

    <div class="content">
        <div class="formulas-list">
            @for (formula of formulas(); track formula.id; let i = $index) {
            <app-formula-row [formula]="formula" [index]="i" [isFirst]="i === 0" [isLast]="i === formulas().length - 1"
                (remove)="onRemove(formula.id)" (expressionChange)="onExpressionChange(formula.id, $event)"
                (colorChange)="onColorChange(formula.id, $event)" (toggleEnabled)="onToggleEnabled(formula.id)"
                (toggleLocked)="onToggleLocked(formula.id)" (duplicate)="onDuplicate(formula.id)"
                (moveUp)="onMoveUp(formula.id)" (moveDown)="onMoveDown(formula.id)" />
            } @empty {
            <div class="empty-state">
                <p>Nenhuma fun√ß√£o de compara√ß√£o</p>
                <p class="hint">Adicione fun√ß√µes alvo para comparar com a rede</p>
            </div>
            }
        </div>

        <div class="panel-footer">
            <button class="btn btn-primary btn-add" (click)="addFormula()">
                <span class="icon">+</span>
                Adicionar Fun√ß√£o
            </button>
        </div>
    </div>
</div>