<div class="canvas-container">
    <app-canvas-renderer
        [layers]="network.layers()"
        [showNetwork]="true"
        [plottedFormulas]="formula.plottedFormulas()"
        [plottedCompareFormulas]="compare.plottedFormulas()"
        [networkOutputs]="networkOutputs()"
        [config]="rendererConfig()"
        [scale]="scale()"
        [offsetX]="offsetX()"
        [offsetY]="offsetY()"
        (pan)="onPan($event)"
        (zoom)="onZoom($event)">
    </app-canvas-renderer>

    <!-- Controls overlay -->
    <div class="controls">
        <button class="btn-icon" (click)="resetView()" title="Reset View">
            ⟲
        </button>
    </div>

  @if (showCropBox()) {
  <div class="crop-box-overlay" [style.left.px]="cropBox().x" [style.top.px]="cropBox().y"
    [style.width.px]="cropBox().width" [style.height.px]="cropBox().height">
    <div class="crop-drag-area" (mousedown)="onCropBoxMouseDown($event)"></div>
    <div class="crop-handle crop-handle-nw" data-handle="nw"></div>
    <div class="crop-handle crop-handle-ne" data-handle="ne"></div>
    <div class="crop-handle crop-handle-sw" data-handle="sw"></div>
    <div class="crop-handle crop-handle-se" data-handle="se"></div>
    <div class="crop-info">
      {{ cropBox().width }} × {{ cropBox().height }} px
    </div>
  </div>
  }

  <div class="overlay-info">
    <div>Scale: {{ scale() | number:'1.0-1' }}x</div>
    <div>Offset: ({{ offsetX() | number:'1.0-0' }}, {{ offsetY() | number:'1.0-0' }})</div>
  </div>
</div>